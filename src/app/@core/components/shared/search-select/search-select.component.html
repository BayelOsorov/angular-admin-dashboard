<!---->
<nz-select
    ngDefaultControl
    [nzMode]="mode"
    class="w-100"
    nzAllowClear
    nzServerSearch
    [formControl]="control"
    nzShowSearch
    (nzOnSearch)="onSearch($event)"
    [nzSize]="size"
    [ngClass]="size === 'default' && 'small-input'"
    [nzPlaceHolder]="placeholder"
    [compareWith]="compareFn"
    nzNotFoundContent="Ничего не найдено"
    [nzStatus]="isRequired && submitted && control.errors?.['required']
                                    ? 'error'
                                    : ''
                            "
>
    <ng-container *ngIf="!isLoading">
        <nz-option *ngIf="!isRequired" nzValue="" nzLabel="Все"></nz-option>
        <nz-option
            *ngFor="let o of data"
            [nzValue]="o.id"
            [nzLabel]="o.name"
        ></nz-option>
    </ng-container>
    <nz-option *ngIf="isLoading" nzDisabled nzCustomContent>
        <span nz-icon nzType="loading" class="loading-icon"></span>
        Загрузка...
    </nz-option>
</nz-select>
